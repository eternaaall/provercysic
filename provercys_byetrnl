#!/bin/bash

CONFIG_FILE="$HOME/.cysic_prover_config"

logo() {
clear
echo
echo "‚ïî‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïó"
echo "‚ïë     üíª Cysic Simple Prover           ‚ïë"
echo "‚ïë     created by eternaaall           ‚ïë"
echo "‚ïö‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïù"
echo

if [[ -f "$CONFIG_FILE" ]]; then
  source "$CONFIG_FILE"
  echo "üîë Using saved wallet address: $WALLET"
  SHORT_RPC="${RPC:0:30}****************${RPC: -5}"
  echo "üì° RPC: $SHORT_RPC"
  echo "üì¶ Dependencies already installed."
  [[ -n "$PROVER_ID" ]] && echo "üîé Prover ID: 0x********$PROVER_ID"
  echo
fi
}

save_config() {
  echo "WALLET=$WALLET" > "$CONFIG_FILE"
  echo "RPC=$RPC" >> "$CONFIG_FILE"
  echo "MODE=$MODE" >> "$CONFIG_FILE"
  echo "PROVER_ID=$PROVER_ID" >> "$CONFIG_FILE"
}

load_config() {
  source "$CONFIG_FILE" 2>/dev/null
}

reset_keys() {
  echo
  read -p "Are you sure you want to delete the prover keys? (y/n): " CONFIRM
  if [[ "$CONFIRM" == "y" ]]; then
    echo "Removing prover keys..."
    rm -rf /root/cysic-prover/data/
    rm -rf /root/cysic-prover/~/
  else
    echo "Reset cancelled."
  fi
}

# –û—Å—Ç–∞–ª—å–Ω–∞—è –ª–æ–≥–∏–∫–∞ –æ—Å—Ç–∞—ë—Ç—Å—è –±–µ–∑ –∏–∑–º–µ–Ω–µ–Ω–∏–π,
# –Ω–æ –ø–æ—Å–ª–µ —É—Å—Ç–∞–Ω–æ–≤–∫–∏ –≤ run_installer –º–æ–∂–Ω–æ –¥–æ–±–∞–≤–∏—Ç—å –æ–ø—Ä–µ–¥–µ–ª–µ–Ω–∏–µ PROVER_ID –ø–æ –ª–æ–≥—É –∏ —Å–æ—Ö—Ä–∞–Ω–∏—Ç—å –µ–≥–æ:
# –ù–∞–ø—Ä–∏–º–µ—Ä, —Å –ø–æ–º–æ—â—å—é grep & cut, –µ—Å–ª–∏ –ª–æ–≥ –¥–æ—Å—Ç—É–ø–µ–Ω –ø–æ—Å–ª–µ –∑–∞–ø—É—Å–∫–∞
